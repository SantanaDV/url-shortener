# ğŸ”— URL Shortener API

A production-ready URL shortening REST API built with Java 17 and Spring Boot. Inspired by services like Bit.ly, it generates short unique hashes using a **Base62 encoding** algorithm and handles HTTP redirections.

---

## ğŸ“‹ Table of Contents

- [Overview](#overview)
- [Tech Stack](#tech-stack)
- [Architecture](#architecture)
- [Getting Started](#getting-started)
- [API Reference](#api-reference)
- [How Base62 Works](#how-base62-works)
- [Project Structure](#project-structure)
- [Docker](#docker)
- [Future Improvements](#future-improvements)

---

## Overview

This project was built as a deep dive into backend fundamentals: REST API design, database persistence with JPA, HTTP redirections, and clean layered architecture. It covers a classic **System Design** interview topic from end to end.

**Core flow:**

```
POST /api/shorten  â†’  Saves URL to DB  â†’  Encodes DB ID to Base62  â†’  Returns short URL
GET  /{hash}       â†’  Looks up hash in DB  â†’  HTTP 302 redirect to original URL
```

---

## Tech Stack

| Layer | Technology |
|---|---|
| Language | Java 17 |
| Framework | Spring Boot 4.x |
| Persistence | Spring Data JPA + Hibernate |
| Database | H2 (in-memory) |
| Build Tool | Maven |
| Containerization | Docker |

---

## Architecture

The project follows a classic **layered architecture** with strict separation of concerns:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Controller Layer          â”‚  â† HTTP requests / responses
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            Service Layer            â”‚  â† Business logic
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Repository Layer           â”‚  â† Database access (JPA)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             Model Layer             â”‚  â† Entities & DTOs
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Each layer only communicates with the layer directly below it. The Controller never touches the Repository. This enforces the **Single Responsibility Principle** from SOLID.

---

## Getting Started

### Prerequisites

- Java 17+
- Maven 3.8+
- (Optional) Docker

### Run locally

```bash
# Clone the repository
git clone https://github.com/YOUR_USERNAME/url-shortener.git
cd url-shortener

# Run with Maven wrapper
./mvnw spring-boot:run
```

The app starts on `http://localhost:8080`.

### H2 Console (in-memory database UI)

While the app is running, you can inspect the database at:

```
URL:      http://localhost:8080/h2-console
JDBC URL: jdbc:h2:mem:urlshortener
User:     sa
Password: (leave blank)
```

---

## API Reference

### `POST /api/shorten` â€” Shorten a URL

**Request body:**
```json
{
  "url": "https://www.google.com/search?q=spring+boot+url+shortener"
}
```

**Response `201 Created`:**
```json
{
  "originalUrl": "https://www.google.com/search?q=spring+boot+url+shortener",
  "shortUrl": "http://localhost:8080/1",
  "hash": "1"
}
```

**Validation errors `400 Bad Request`:**
```json
{
  "timestamp": "2026-02-20T19:00:00",
  "status": 400,
  "error": "Bad Request",
  "message": "url: URL must start with http:// or https://"
}
```

---

### `GET /{hash}` â€” Redirect to original URL

```
GET http://localhost:8080/1
```

**Response `302 Found`:**
```
Location: https://www.google.com/search?q=spring+boot+url+shortener
```

**Hash not found `404 Not Found`:**
```json
{
  "timestamp": "2026-02-20T19:00:00",
  "status": 404,
  "error": "Not Found",
  "message": "No URL found for hash: abc123"
}
```

---

## How Base62 Works

The hash is generated by encoding the **auto-incremented database ID** into Base62.

Base62 uses 62 characters: `0-9` + `a-z` + `A-Z`

```
ID    â†’   Hash
1     â†’   "1"
61    â†’   "Z"
62    â†’   "10"
12345 â†’   "3dV"
```

With just 6 characters, Base62 supports **56 billion unique URLs** (62â¶).

The advantage of this approach: since every database ID is unique by definition, every generated hash is also guaranteed to be unique â€” no collision checks needed.

---

## Project Structure

```
src/
â””â”€â”€ main/
    â”œâ”€â”€ java/com/urlshortener/
    â”‚   â”œâ”€â”€ UrlShortenerApplication.java
    â”‚   â”œâ”€â”€ controller/
    â”‚   â”‚   â””â”€â”€ UrlController.java          # REST endpoints
    â”‚   â”œâ”€â”€ service/
    â”‚   â”‚   â”œâ”€â”€ UrlService.java             # Interface (contract)
    â”‚   â”‚   â””â”€â”€ UrlServiceImpl.java         # Business logic
    â”‚   â”œâ”€â”€ repository/
    â”‚   â”‚   â””â”€â”€ UrlRepository.java          # JPA data access
    â”‚   â”œâ”€â”€ model/
    â”‚   â”‚   â””â”€â”€ UrlMapping.java             # DB entity
    â”‚   â”œâ”€â”€ dto/
    â”‚   â”‚   â”œâ”€â”€ ShortenRequest.java         # API input
    â”‚   â”‚   â””â”€â”€ ShortenResponse.java        # API output
    â”‚   â”œâ”€â”€ exception/
    â”‚   â”‚   â””â”€â”€ GlobalExceptionHandler.java # Centralized error handling
    â”‚   â””â”€â”€ util/
    â”‚       â””â”€â”€ Base62Encoder.java          # Encoding algorithm
    â””â”€â”€ resources/
        â””â”€â”€ application.properties
```

---

## Docker

### Build the image

```bash
docker build -t url-shortener .
```

### Run the container

```bash
docker run -p 8080:8080 url-shortener
```

The API will be available at `http://localhost:8080`.

---

## Future Improvements

- **Custom aliases** â€” allow users to choose their own hash (e.g. `/my-link`)
- **Expiration dates** â€” auto-delete URLs after N days
- **Click tracking** â€” count how many times each short URL is visited
- **MySQL in production** â€” replace H2 with a persistent database
- **Rate limiting** â€” prevent abuse with request throttling per IP
- **API authentication** â€” protect the shorten endpoint with API keys


## ğŸš€ Live Demo
https://url-shortener-production-d7cf.up.railway.app